/* Reset-ish */
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, Apple Color Emoji, Segoe UI Emoji;
  color: #e6f3ff;
  background: radial-gradient(1200px 600px at 50% 20%, #0a1a2f 0%, #060b12 60%, #04070b 100%);
  overflow: hidden;
}
.scanlines::before {
  content: ""; position: fixed; inset: 0;
  background: repeating-linear-gradient(transparent, transparent 2px, rgba(255,255,255,0.02) 3px);
  pointer-events: none; mix-blend-mode: overlay; opacity: .6;
}
.topbar {
  position: fixed; top: 0; left: 0; right: 0;
  display: flex; align-items: center; justify-content: space-between;
  padding: 12px 16px;
  background: linear-gradient(180deg, rgba(8,22,40,.85), rgba(8,22,40,0));
  backdrop-filter: blur(6px); z-index: 10;
}
.topbar h1 { margin: 0; font-size: clamp(18px, 2.5vw, 28px);
  letter-spacing: .04em; text-shadow: 0 0 12px rgba(0, 212, 255, 0.35); }
.toggles { display: flex; gap: 12px; align-items: center; }
.switch { display: inline-flex; align-items: center; gap: 8px; cursor: pointer; user-select: none; }
.switch input { display: none; }
.switch .slider {
  width: 42px; height: 24px; border-radius: 999px; position: relative;
  background: #223a58; box-shadow: inset 0 0 0 2px #29527d; transition: .25s ease;
}
.switch .slider::after {
  content: ""; position: absolute; top: 3px; left: 3px; width: 18px; height: 18px;
  border-radius: 50%; background: #9bd7ff; box-shadow: 0 0 12px rgba(0, 212, 255, .4); transition: .25s ease;
}
.switch input:checked + .slider { background: #0b5aa1; box-shadow: inset 0 0 0 2px #118ad5; }
.switch input:checked + .slider::after { transform: translateX(18px); }
.switch .label { font-size: 12px; opacity: .85; }

.icon-btn {
  border: 0; background: #0e2a49; color: #cfeaff; border-radius: 10px;
  padding: 8px; cursor: pointer; box-shadow: inset 0 0 0 2px rgba(0,212,255,.2);
}
.icon-btn:hover { filter: brightness(1.12); }

.badge {
  display: inline-block; min-width: 56px; text-align: center;
  padding: 6px 10px; border-radius: 999px; font-weight: 800; letter-spacing: .04em;
  background: #103055; color: #dff2ff; box-shadow: inset 0 0 0 2px rgba(0,212,255,.25);
}

.center {
  height: 100vh; display: grid; place-items: center; padding-top: 60px;
}
.emergency-btn {
  position: relative; width: clamp(220px, 40vw, 420px); aspect-ratio: 2.5 / 1; border-radius: 24px;
  background: radial-gradient(120% 120% at 50% 10%, #12273f, #0d2036 60%, #08182a 100%);
  box-shadow: 0 12px 40px rgba(0,0,0,.6), inset 0 0 0 3px rgba(0, 212, 255, .25);
  border: 0; cursor: pointer; overflow: hidden; outline: none; transform: translateZ(0);
}
.emergency-btn .text { position: relative; z-index: 2; font-size: clamp(16px, 3.5vw, 28px);
  letter-spacing: .12em; font-weight: 800; color: #e6f3ff; text-shadow: 0 0 14px rgba(64, 232, 255, .25); }
.emergency-btn .glow {
  position: absolute; inset: -40%;
  background: conic-gradient(from 0deg, rgba(0,212,255,.25), transparent 30%, rgba(0,212,255,.25) 60%, transparent 100%);
  animation: spin 4s linear infinite; filter: blur(30px); opacity: .8;
}
.emergency-btn:active { transform: translateY(2px); }
.quota-text { margin-top: 12px; opacity: .85; font-size: 14px; text-align: center; }

@keyframes spin { to { transform: rotate(360deg); } }
.modal { position: fixed; inset: 0; display: grid; place-items: center; background: rgba(3,8,14,.6); backdrop-filter: blur(4px); z-index: 30; }
.modal.hidden { display: none; }
.modal-card { width: min(520px, 92vw); padding: 20px; border-radius: 16px;
  background: linear-gradient(180deg, #0d2239, #0a1a2f);
  box-shadow: 0 12px 50px rgba(0,0,0,.6), inset 0 0 0 2px rgba(0,212,255,.2); }
.modal-card h2 { margin: 0 0 10px; letter-spacing: .06em; }
.muted { opacity: .8; font-size: 13px; display: block; margin-top: 6px; }
.settings-row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; align-items: center; margin: 10px 0; }
.field-label { font-weight: 700; }
.number-input { width: 100%; padding: 10px; border-radius: 10px; border: 0; background: #0e2a49; color: #cfeaff;
  box-shadow: inset 0 0 0 2px rgba(0,212,255,.2); }
.settings-actions { display: flex; justify-content: flex-end; gap: 10px; align-items: center; }

.ghost, .primary, .danger { border: 0; border-radius: 10px; padding: 10px 14px; cursor: pointer; font-weight: 700; }
.ghost { background: #0e2a49; color: #cfeaff; box-shadow: inset 0 0 0 2px rgba(0,212,255,.2); }
.primary { background: #118ad5; color: white; box-shadow: 0 8px 24px rgba(17,138,213,.4); }
.danger { background: #c53939; color: white; box-shadow: 0 8px 24px rgba(197,57,57,.4); }
.small { font-size: 12px; padding: 8px 10px; }

.countdown {
  position: fixed; inset: 0; display: grid; grid-template-rows: auto 1fr auto;
  padding: 80px 16px 24px; gap: 18px; z-index: 20;
  background: radial-gradient(1200px 600px at 50% 20%, #0a1a2f 0%, #060b12 60%, #04070b 100%);
}
.countdown.hidden { display: none; }
.hud { display: flex; align-items: center; justify-content: space-between; }
.status { font-size: clamp(16px, 3.5vw, 22px); letter-spacing: .06em; opacity: .85; }
.dial-wrap { position: relative; display: grid; place-items: center; }
.dial { width: min(72vw, 360px); height: auto; }
.dial .bg { fill: none; stroke: rgba(0,212,255,.18); stroke-width: 10; filter: url(#glow); }
.dial .fg {
  fill: none; stroke: #41e6ff; stroke-width: 10; filter: url(#glow);
  transform: rotate(-90deg); transform-origin: 50% 50%;
}
.dial-center { position: absolute; inset: 0; display: grid; place-items: center; pointer-events: none;
  font-weight: 800; letter-spacing: .06em; text-shadow: 0 0 12px rgba(64, 232, 255, .35); }
.time-inside { font-size: clamp(28px, 7vw, 48px); line-height: 1; }
.pulse { position: absolute; width: 12px; height: 12px; border-radius: 50%; background: #9bd7ff;
  box-shadow: 0 0 20px rgba(155,215,255,.75); animation: pulse 1.25s ease-in-out infinite; }
@keyframes pulse { 0%, 100% { transform: scale(1); opacity: .9; } 50% { transform: scale(1.6); opacity: .4; } }
.controls { display: flex; gap: 12px; justify-content: center; }

#app.state-normal .dial .fg { stroke: #41e6ff; }
#app.state-warn .dial .fg { stroke: #ffc94d; }
#app.state-danger .dial .fg { stroke: #ff6464; }
#app.state-normal .time-inside { color: #e6f3ff; }
#app.state-warn .time-inside { color: #ffe28a; }
#app.state-danger .time-inside { color: #ffb3b3; }

.overlay { position: fixed; inset: 0; display: grid; place-items: center; background: rgba(0, 0, 0, .6);
  backdrop-filter: blur(3px); z-index: 40; }
.overlay.hidden { display: none; }
.overlay-card { width: min(540px, 92vw); padding: 22px; border-radius: 16px;
  background: linear-gradient(180deg, #0d2239, #0a1a2f); box-shadow: 0 12px 50px rgba(0,0,0,.6), inset 0 0 0 2px rgba(0,212,255,.25); text-align: center; }
.overlay-card h2 { margin-top: 0; }

/* Feedback flash / shake */
.flash { animation: screenflash .6s ease; }
@keyframes screenflash {
  0% { box-shadow: inset 0 0 0 9999px rgba(255,255,255,.0); }
  10% { box-shadow: inset 0 0 0 9999px rgba(255,255,255,.15); }
  100% { box-shadow: inset 0 0 0 9999px rgba(255,255,255,0); }
}
.shake { animation: shake .4s ease-in-out; }
@keyframes shake {
  0%,100% { transform: translateX(0); }
  25% { transform: translateX(-6px); }
  50% { transform: translateX(6px); }
  75% { transform: translateX(-4px); }
}

.toast {
  position: fixed; bottom: 18px; left: 50%; transform: translateX(-50%);
  background: #c53939; color: white; padding: 10px 14px; border-radius: 10px;
  box-shadow: 0 10px 30px rgba(0,0,0,.4); z-index: 50; font-weight: 700; letter-spacing: .03em;
}
.toast.hidden { display: none; }
.footer { position: fixed; bottom: 6px; left: 0; right: 0; text-align: center; opacity: .6; font-size: 12px; pointer-events: none; }
.hidden { display: none !important; }

@media (max-height: 640px) {
  .center { padding-top: 40px; }
  .countdown { padding-top: 64px; }
}
